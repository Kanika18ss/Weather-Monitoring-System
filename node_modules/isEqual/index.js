function objIsEqual(obj1, obj2, deep) {
    var d = deep || false,
        result = isEqual(obj1, obj2),
        result2 = result.every(function(val) {
        if (Array.isArray(val)) {
            // 元素为数组
            return val.every(function(val) {
                return val;
            });
        } else {
            // 元素不是数组
            return val;
        }
    });

    function isEqual(obj1, obj2) {
        var key1 = Object.getOwnPropertyNames(obj1),
            key2 = Object.getOwnPropertyNames(obj2),
            arr = [];

        if (key1.length !== key2.length) {
            return false;
        }

        for (var i = 0, l = key1.length; i < l; i++) {
            var name = key1[i],
                value1 = obj1[name],
                value2 = obj2[name];

            if (value1 instanceof Object && value2 instanceof Object) {
                //属性的值为引用类型
                arr.push(arguments.callee(value1, value2));
            } else {
                //属性的值不为引用类型
                arr.push(value1 === value2);
            }
        }
        return arr;
    }


    return d ? result2 : result;
}

module.exports = objIsEqual;
